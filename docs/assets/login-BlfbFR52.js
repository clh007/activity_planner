/* empty css             *//* empty css                   *//* empty css                  *//* empty css                 */import{d as R,r as c,i as V,f as t,n as p,b as u,O as d,g as f,a as v,u as z,E as a,P as O,Q as W,o as x,k,y as j,z as F,R as J,S as M,_ as G}from"./index-Bm7jPsP5.js";import{i as w}from"./request-DbTjg1J2.js";import{q as Q}from"./index-BeRDJgL-.js";import{u as H}from"./el-message-BMG_IbRx.js";import{p as I,e as S}from"./common-JspXp6_I.js";import{u as K}from"./user-CRqoeCa4.js";const L=r=>w.post("/auth/login",Q.stringify(r)),X=r=>w.post("/auth/register",JSON.stringify(r),{headers:{"Content-Type":"Application/json"}}),P=(r,y)=>{const n=`/auth/verification/code?${`identifier=${r}&type=${y}`}`;return w.get(n,{headers:{"Content-Type":"application/json"}})},Y=r=>w.get("/auth/find/password?account="+r),_=r=>(j("data-v-3b9dfa68"),r=r(),F(),r),Z={class:"body"},ee={class:"main"},te={class:"form"},oe=_(()=>t("h2",{class:"form_title title"},"æ³¨å†Œ",-1)),se={class:"code"},ae={class:"form"},le=_(()=>t("h2",{class:"form_title title"},"ç™»å½•",-1)),ne=_(()=>t("h2",{class:"switch__title title"},"æ²¡æœ‰å¸å·ï¼Ÿ",-1)),re=_(()=>t("p",{class:"switch__description description"},"ç«‹å³æ³¨å†Œå§ðŸ˜ƒ",-1)),ie=_(()=>t("h2",{class:"switch__title title"},"å·²æœ‰å¸å·ï¼Ÿ",-1)),ue=_(()=>t("p",{class:"switch__description description"},"è¯·ç™»å½•ðŸš€",-1)),de=R({__name:"login",setup(r){const y=z(),C=H(),n=c(!0),m=c("0"),s=c(""),i=c(""),h=c(""),g=c(""),E=()=>{if(s.value===""){a.error({message:"è¯·è¾“å…¥æ‰‹æœºå·æˆ–é‚®ç®±"});return}if(!(I(s.value)||S(s.value))){a.error({message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·æˆ–è€…é‚®ç®±"});return}if(i.value===""){a.error({message:"è¯·è¾“å…¥å¯†ç "});return}let l={account:s.value,password:i.value};L(l).then(e=>{e.data.code===400&&a.error(e.data.message),e.data.code===200&&(a.success({message:"ç™»å½•æˆåŠŸ"}),K().setUser(e.data.data),C.login(),localStorage.setItem("userToken",e.data.data.userToken),localStorage.setItem("currentUser",JSON.stringify(e.data.data)),y.push({name:"home"}))}).catch(e=>{})},$=async()=>{if(h.value===""){a.error("è¯·è¾“å…¥ç”¨æˆ·å!");return}if(s.value===""){a.error("è¯·è¾“å…¥æ‰‹æœºå·æˆ–è€…é‚®ç®±!");return}if(i.value===""){a.error("è¯·è¾“å…¥å¯†ç !");return}if(g.value===""){a.error("è¯·è¾“å…¥éªŒè¯ç !");return}let l={username:h.value,password:i.value,code:g.value};m.value==="0"?l.phone=s.value:l.email=s.value,await X(l).then(e=>{e.data.code===200?a.success("æ³¨å†ŒæˆåŠŸ"):e.data.code===400&&a.error(e.data.message)}).catch(e=>{a.error("æ³¨å†Œå¤±è´¥")})},N=()=>{if(s.value===""){a.error("è¯·è¾“å…¥æ‰‹æœºå·æˆ–è€…é‚®ç®±!");return}if(m.value==="0")if(I(s.value))P(s.value,"phone").then(l=>{console.log(l.data)}).catch(l=>{console.log(l)}),a.success("èŽ·å–æˆåŠŸ!");else{a.error("è¯·è¾“å…¥æœ‰æ•ˆæ‰‹æœºå·!");return}else if(S(s.value))P(s.value,"email").then(l=>{console.log(l.data)}).catch(l=>{}),a.success("èŽ·å–æˆåŠŸ!");else{a.error("è¯·è¾“å…¥æœ‰æ•ˆé‚®ç®±!");return}},b=c(!1),T=()=>{b.value=!0},A=()=>{if(s.value===""){a.error("è¯·è¾“å…¥æ‰‹æœºå·æˆ–è€…é‚®ç®±!");return}Y(s.value).then(l=>{l.data.code===200?a.success("å‘é€æˆåŠŸ!"):a.error(l.data.message)}).catch(l=>{})};return(l,e)=>{const U=J,q=O,B=M,D=W;return x(),V("div",Z,[t("div",ee,[t("div",{class:p(["container a-container",{"is-txl":n.value}])},[t("div",te,[oe,u(t("input",{class:"form__input",type:"text",placeholder:"ç”¨æˆ·å","onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o)},null,512),[[d,h.value]]),u(t("input",{class:"form__input",type:"password",placeholder:"å¯†ç ","onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o)},null,512),[[d,i.value]]),f(q,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),style:{width:"350px"}},{default:v(()=>[f(U,{value:"0"},{default:v(()=>[k("æ‰‹æœºå·")]),_:1}),f(U,{value:"1",style:{"margin-left":"50px"}},{default:v(()=>[k("é‚®ç®±")]),_:1})]),_:1},8,["modelValue"]),m.value==="1"?u((x(),V("input",{key:0,class:"form__input",type:"email",placeholder:"é‚®ç®±","onUpdate:modelValue":e[3]||(e[3]=o=>s.value=o)},null,512)),[[d,s.value]]):u((x(),V("input",{key:1,class:"form__input",type:"tel",placeholder:"æ‰‹æœºå·","onUpdate:modelValue":e[4]||(e[4]=o=>s.value=o)},null,512)),[[d,s.value]]),t("div",se,[u(t("input",{class:"form__input",style:{width:"200px"},type:"text",placeholder:"éªŒè¯ç ","onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o)},null,512),[[d,g.value]]),t("span",{onClick:N},"èŽ·å–éªŒè¯ç ")]),t("button",{class:"form__button button",onClick:$},"æ³¨å†Œ")])],2),t("div",{class:p(["container b-container",[{"is-txl":n.value},{"is-z200":n.value}]])},[t("div",ae,[le,u(t("input",{class:"form__input",type:"text",placeholder:"é‚®ç®±/æ‰‹æœºå·","onUpdate:modelValue":e[6]||(e[6]=o=>s.value=o)},null,512),[[d,s.value]]),u(t("input",{class:"form__input",type:"password",placeholder:"å¯†ç ","onUpdate:modelValue":e[7]||(e[7]=o=>i.value=o)},null,512),[[d,i.value]]),t("a",{class:"form__link",onClick:e[8]||(e[8]=o=>T())},"å¿˜è®°å¯†ç ï¼Ÿ"),t("button",{class:"form__button button",onClick:E},"ç™»å½•")])],2),t("div",{class:p(["switch",{"is-txr":n.value}])},[t("div",{class:p(["switch__circle",{"is-txr":n.value}])},null,2),t("div",{class:p(["switch__circle switch__circle--t",{"is-txr":n.value}])},null,2),t("div",{class:p(["switch__container",{"is-hidden":!n.value}])},[ne,re,t("button",{class:"switch__button button",onClick:e[9]||(e[9]=o=>n.value=!n.value)},"æ³¨å†Œ")],2),t("div",{class:p(["switch__container",{"is-hidden":n.value}])},[ie,ue,t("button",{class:"switch__button button",onClick:e[10]||(e[10]=o=>n.value=!n.value)},"ç™»å½•")],2)],2)]),f(D,{title:"å¯†ç æ‰¾å›ž",modelValue:b.value,"onUpdate:modelValue":e[13]||(e[13]=o=>b.value=o),width:"25%",center:""},{footer:v(()=>[f(B,{type:"info",onClick:e[12]||(e[12]=o=>A())},{default:v(()=>[k("æäº¤")]),_:1})]),default:v(()=>[u(t("input",{class:"form__input",type:"text",placeholder:"é‚®ç®±/æ‰‹æœºå·","onUpdate:modelValue":e[11]||(e[11]=o=>s.value=o)},null,512),[[d,s.value]])]),_:1},8,["modelValue"])])}}}),be=G(de,[["__scopeId","data-v-3b9dfa68"]]);export{be as default};
