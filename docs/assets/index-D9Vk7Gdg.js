/* empty css             *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 */import{d as I,u as U,s as E,r as g,w as D,o as u,c as w,a,b as M,v as z,e as o,f as t,g as n,h as A,i as x,j as F,k as C,n as H,T as j,E as q,l as K,m as L,p as P,q as W,t as G,x as J,y as O,z as Q,_ as S,F as X,A as Y,B as Z}from"./index-WwTFQ9qb.js";import{u as ee}from"./el-message-fmrCKwlS.js";import{u as $}from"./user-CohggioG.js";const d=i=>(O("data-v-8b4f5615"),i=i(),Q(),i),oe=d(()=>t("h2",null,"PLANNER",-1)),te=[oe],se=d(()=>t("div",{class:"flex-grow"},null,-1)),ne={class:"bar-right"},re=d(()=>t("span",null,"首页",-1)),ae=[re],le={class:"search-bar myCenter"},ie={class:"myCenter bar-user"},ce=d(()=>t("span",null,"登录",-1)),pe=I({__name:"topbar",setup(i){const r=U(),_=ee(),{is_login:m,topbar:l}=E(_),c=g(""),V=()=>{_.logout(),$().clearUser(),localStorage.removeItem("userToken"),localStorage.removeItem("currentUser"),r.push("/login")},h=g(0);window.onscroll=()=>{h.value=document.documentElement.scrollTop},D(h,(p,e)=>{let v=p>window.innerHeight/2,b=p-e<0;_.setTopbar({topbar_entry:v,topbar_visible:b})});const k=()=>{if(c.value===""){q.warning("请输入搜索关键字");return}r.push({name:"search",params:{key:c.value}}),c.value=""},T=p=>{p.code==="Enter"&&k()},{currentUser:B}=E($());return(p,e)=>{const v=K,b=L,N=P,f=W,y=G,R=J;return u(),w(j,{name:"el-fade-in-linear"},{default:a(()=>[M(t("div",{onMouseenter:e[9]||(e[9]=s=>o(l).topbar_hoveEntry=!0),onMouseleave:e[10]||(e[10]=s=>o(l).topbar_hoveEntry=!1),class:H(["top-bar myCenter",[{entry:o(l).topbar_entry},{hoverEntry:(o(r).currentRoute.value.path=="/login"||o(l).topbar_hoveEntry)&&!o(l).topbar_entry}]])},[t("div",{class:"web-title",onClick:e[0]||(e[0]=s=>o(r).push("/"))},te),se,t("ul",ne,[t("li",{onClick:e[1]||(e[1]=s=>o(r).push("/")),class:"bar-activity"},ae),t("li",le,[n(v,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),placeholder:"搜索活动",class:"search-input",onKeydown:T},null,8,["modelValue"]),n(b,{size:"25px",onClick:e[3]||(e[3]=s=>k()),class:"search-icon"},{default:a(()=>[n(o(A))]),_:1})]),o(B).is_admin?(u(),x("li",{key:0,class:"adminEnter",onClick:e[4]||(e[4]=s=>o(r).push("/back"))}," 后台 ")):F("",!0),t("li",{class:"create",onClick:e[5]||(e[5]=s=>o(r).push("/create"))}," 创建活动 "),t("li",ie,[n(R,{trigger:"hover"},{dropdown:a(()=>[n(y,null,{default:a(()=>[o(m)?(u(),w(y,{key:1},{default:a(()=>[n(f,{onClick:e[7]||(e[7]=s=>o(r).push("/user"))},{default:a(()=>[C("个人中心")]),_:1}),n(f,{onClick:e[8]||(e[8]=s=>V())},{default:a(()=>[C(" 退出登录")]),_:1})]),_:1})):(u(),w(f,{key:0,onClick:e[6]||(e[6]=s=>o(r).push("/login"))},{default:a(()=>[ce]),_:1}))]),_:1})]),default:a(()=>[n(N,{fit:"cover",class:"avatar-bar",src:"https://www.bilibili.com/favicon.ico?v=1"})]),_:1})])])],34),[[z,o(l).topbar_visible]])]),_:1})}}}),ue=S(pe,[["__scopeId","data-v-8b4f5615"]]),_e={class:"web-layout"},de={class:"web-bar"},me=I({__name:"index",setup(i){return(r,_)=>{const m=Y("RouterView"),l=Z;return u(),x(X,null,[t("div",_e,[t("div",de,[n(ue)]),n(m)]),n(l)],64)}}}),Ce=S(me,[["__scopeId","data-v-95251b8b"]]);export{Ce as default};
