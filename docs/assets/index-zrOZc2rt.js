/* empty css             *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 */import{d as I,u as U,s as E,r as C,w as D,o as c,c as w,a as r,b as M,v as z,e as o,f as t,g as a,h as A,i as x,j as F,k as g,n as H,T as j,E as q,l as K,m as L,p as P,q as W,t as G,x as J,y as O,z as Q,_ as S,F as X,A as Y,B as Z}from"./index-DWOuGMkE.js";import{u as ee}from"./el-message-CvCZY6Cp.js";import{u as $}from"./user-CrbKy_3f.js";const d=i=>(O("data-v-1358675a"),i=i(),Q(),i),oe=d(()=>t("h2",null,"PLANNER",-1)),te=[oe],se=d(()=>t("div",{class:"flex-grow"},null,-1)),ne={class:"bar-right"},ae=d(()=>t("span",null,"首页",-1)),re=[ae],le=d(()=>t("span",null,"个人界面",-1)),ie=[le],pe={class:"search-bar myCenter"},ue={class:"myCenter bar-user"},ce=d(()=>t("span",null,"登录",-1)),de=I({__name:"topbar",setup(i){const n=U(),_=ee(),{is_login:m,topbar:l}=E(_),p=C(""),V=()=>{_.logout(),$().clearUser(),localStorage.removeItem("userToken"),localStorage.removeItem("currentUser"),n.push("/login")},h=C(0);window.onscroll=()=>{h.value=document.documentElement.scrollTop},D(h,(u,e)=>{let v=u>window.innerHeight/2,b=u-e<0;_.setTopbar({topbar_entry:v,topbar_visible:b})});const k=()=>{if(p.value===""){q.warning("请输入搜索关键字");return}n.push({name:"search",params:{key:p.value}}),p.value=""},T=u=>{u.code==="Enter"&&k()},{currentUser:B}=E($());return(u,e)=>{const v=K,b=L,N=P,f=W,y=G,R=J;return c(),w(j,{name:"el-fade-in-linear"},{default:r(()=>[M(t("div",{onMouseenter:e[11]||(e[11]=s=>o(l).topbar_hoveEntry=!0),onMouseleave:e[12]||(e[12]=s=>o(l).topbar_hoveEntry=!1),class:H(["top-bar myCenter",[{entry:o(l).topbar_entry},{hoverEntry:(o(n).currentRoute.value.path=="/login"||o(l).topbar_hoveEntry)&&!o(l).topbar_entry}]])},[t("div",{class:"web-title",onClick:e[0]||(e[0]=s=>o(n).push("/"))},te),se,t("ul",ne,[t("li",{onClick:e[1]||(e[1]=s=>o(n).push("/")),class:"bar-activity"},re),t("li",{onClick:e[2]||(e[2]=s=>o(n).push("/user")),class:"bar-activity"},ie),t("li",pe,[a(v,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),placeholder:"搜索活动",class:"search-input",onKeydown:T},null,8,["modelValue"]),a(b,{size:"25px",onClick:e[4]||(e[4]=s=>k()),class:"search-icon"},{default:r(()=>[a(o(A))]),_:1})]),t("li",{class:"adminEnter",onClick:e[5]||(e[5]=s=>o(n).push({name:"activity",params:{id:123}}))}," 活动详情页 "),o(B).is_admin?(c(),x("li",{key:0,class:"adminEnter",onClick:e[6]||(e[6]=s=>o(n).push("/back"))}," 后台 ")):F("",!0),t("li",{class:"create",onClick:e[7]||(e[7]=s=>o(n).push("/create"))}," 创建活动 "),t("li",ue,[a(R,{trigger:"hover"},{dropdown:r(()=>[a(y,null,{default:r(()=>[o(m)?(c(),w(y,{key:1},{default:r(()=>[a(f,{onClick:e[9]||(e[9]=s=>o(n).push("/user"))},{default:r(()=>[g("个人中心")]),_:1}),a(f,{onClick:e[10]||(e[10]=s=>V())},{default:r(()=>[g(" 退出登录")]),_:1})]),_:1})):(c(),w(f,{key:0,onClick:e[8]||(e[8]=s=>o(n).push("/login"))},{default:r(()=>[ce]),_:1}))]),_:1})]),default:r(()=>[a(N,{fit:"cover",class:"avatar-bar",src:"https://www.bilibili.com/favicon.ico?v=1"})]),_:1})])])],34),[[z,o(l).topbar_visible]])]),_:1})}}}),_e=S(de,[["__scopeId","data-v-1358675a"]]),me={class:"web-layout"},ve={class:"web-bar"},be=I({__name:"index",setup(i){return(n,_)=>{const m=Y("RouterView"),l=Z;return c(),x(X,null,[t("div",me,[t("div",ve,[a(_e)]),a(m)]),a(l)],64)}}}),Ie=S(be,[["__scopeId","data-v-95251b8b"]]);export{Ie as default};
