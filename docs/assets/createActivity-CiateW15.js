/* empty css             *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  */import{c as A}from"./activity-CqqDHqNq.js";import{f as U}from"./template-QNpUy5KS.js";import{u as Y}from"./user-pKDXPlVp.js";import"./el-message-CY6Vz1He.js";import{d as k,r as d,w as D,C as I,s as x,i as v,f as a,g as s,a as f,E as u,U as M,l as B,V as T,S as C,o as _,F as H,G as N,c as P,k as b,y as F,z,W as G,_ as L}from"./index-DMHF-AeG.js";import"./request-Qmyq5DiB.js";const i=r=>(F("data-v-2a0438ad"),r=r(),z(),r),O={class:"main"},R=i(()=>a("h3",{class:"title"},"创建活动",-1)),W={class:"template-select"},$=i(()=>a("span",null,"模板选择:",-1)),j={class:"container"},q={class:"activity-title"},J=i(()=>a("span",null,"活动标题",-1)),K={class:"activity-content"},Q=i(()=>a("span",null,"活动介绍",-1)),X={class:"activity-time"},Z=i(()=>a("span",null,"活动起止时间",-1)),ee={class:"location"},te=i(()=>a("span",null,"活动地点",-1)),ae={class:"activity-button"},oe=k({__name:"createActivity",setup(r){const c=d("自定义");D(c,()=>{c.value=="自定义"?(e.value.name="",e.value.info="",e.value.location=""):m.value.forEach(t=>{t.tem_name==c.value&&(e.value.name=t.name,e.value.info=t.info,e.value.location=t.location)})});const e=d({id:0,name:"",info:"",start_time:Date.now().toString(),end_time:Date.now().toString(),location:""}),n=d(["",""]),m=d([{id:0,tem_name:"自定义",name:"",info:"",location:""}]),h=()=>{U().then(t=>{console.log(t.data.data),m.value.push(...t.data.data)}).catch(t=>{console.error("请求模板数据失败:",t)})};I(()=>{h()});const{currentUser:V}=x(Y()),y=async()=>{if(e.value.name==""){u.error("请输入活动标题");return}if(n.value[0]===""||n.value[1]===""){u.error("请选择活动起止时间");return}e.value.start_time=n.value[0].toString(),e.value.end_time=n.value[1].toString(),e.value.creator_id=V.value.id,await A(e.value).then(t=>{t.data.code===200?(console.log(t.data.data),u.success("创建成功"),window.location.replace(`/activity/${t.data.data}`)):u.error("创建失败")}).catch(t=>{})};return(t,l)=>{const g=G,S=M,p=B,w=T,E=C;return _(),v("div",O,[R,a("div",W,[$,s(S,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=o=>c.value=o),placeholder:"请选择活动模板"},{default:f(()=>[(_(!0),v(H,null,N(m.value,o=>(_(),P(g,{value:o.tem_name},null,8,["value"]))),256))]),_:1},8,["modelValue"])]),a("div",j,[a("div",q,[J,s(p,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.name=o),placeholder:"请输入活动标题"},null,8,["modelValue"])]),a("div",K,[Q,s(p,{type:"textarea",modelValue:e.value.info,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.info=o),placeholder:"请输入活动简介"},null,8,["modelValue"])]),a("div",X,[Z,s(w,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value=o),type:"datetimerange","range-separator":"To","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),a("div",ee,[te,s(p,{modelValue:e.value.location,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.location=o),placeholder:"请输入活动地点"},null,8,["modelValue"])]),a("div",ae,[s(E,{type:"primary",onClick:y},{default:f(()=>[b("创建活动")]),_:1})])])])}}}),Ve=L(oe,[["__scopeId","data-v-2a0438ad"]]);export{Ve as default};
