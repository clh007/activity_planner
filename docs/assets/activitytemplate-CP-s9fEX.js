/* empty css             *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import{d as M,r as s,C as N,as as $,i as j,g as e,a as l,f as g,S as Q,a5 as G,at as H,Q as J,o as K,k as p,a6 as E,y as O,z as W,a7 as X,l as Y,au as Z,av as ee,aa as ae,_ as le}from"./index-DMHF-AeG.js";import{g as te,a as oe,u as ne,d as re}from"./template-QNpUy5KS.js";/* empty css                       */import"./request-Qmyq5DiB.js";import"./user-pKDXPlVp.js";import"./el-message-CY6Vz1He.js";const me=V=>(O("data-v-845a618b"),V=V(),W(),V),se={class:"template-management"},ue=me(()=>g("h1",{class:"page-title"},"活动模板管理",-1)),ie={class:"handler flex-center"},pe={class:"pagination-container"},de={class:"dialog-footer"},ce={class:"dialog-footer"},fe=M({__name:"activitytemplate",setup(V){const c=s([{id:0,tem_name:"",name:"",info:"",location:""}]),b=s(!1),y=s(!1),m=s({tem_name:"",name:"",info:"",location:""}),n=s({id:0,tem_name:"",name:"",info:"",location:""}),f=s(),_=s(),C=s(0),h=s(10),w=s(1);N(async()=>{await d()});const d=async()=>{try{const o=await te(w.value,h.value);c.value=o.data.data.content,C.value=o.data.data.totalElements}catch(o){console.error(o)}},A=o=>{w.value=o,d()},I=o=>{h.value=o,d()},T=$({tem_name:[{required:!0,message:"请输入模板名",trigger:"blur"},{min:3,max:20,message:"模板名长度应在 3 到 20 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],info:[{required:!0,message:"请输入简介",trigger:"blur"}],location:[{required:!0,message:"请输入位置",trigger:"blur"}]}),U=()=>{f.value&&f.value.resetFields()},k=()=>{_.value&&_.value.resetFields()},z=()=>{b.value=!0},B=async()=>{if(f.value)try{if(await f.value.validate()){const a=await oe(m.value);b.value=!1,d(),U(),console.log(a)}}catch(o){console.error(o)}},S=o=>{const a=c.value[o];y.value=!0,n.value={...a}},P=async()=>{if(_.value)try{if(await _.value.validate()){const a=await ne(n.value);y.value=!1,d(),k(),console.log(a)}}catch(o){console.error(o)}},q=async o=>{const a=c.value[o];try{await ae.confirm(`您确定要删除活动模板 "${a.tem_name}" 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})&&(await re(a.id),c.value.splice(o,1),d())}catch(r){r!=="cancel"&&console.error(r)}};return(o,a)=>{const r=Q,v=X,D=G,R=H,u=Y,i=Z,x=ee,F=J;return K(),j("div",se,[ue,e(r,{type:"primary",onClick:z,style:{margin:"15px 0"}},{default:l(()=>[p("+新增")]),_:1}),e(D,{data:c.value,border:"",style:{width:"100%"},"max-height":"750"},{default:l(()=>[e(v,{prop:"tem_name",label:"模板名"}),e(v,{prop:"name",label:"名称"}),e(v,{prop:"info",label:"简介"}),e(v,{prop:"location",label:"位置"}),e(v,{label:"操作","header-align":"center"},{default:l(({$index:t})=>[g("div",ie,[e(r,{type:"warning",onClick:E(L=>S(t),["prevent","stop"])},{default:l(()=>[p(" 修改 ")]),_:2},1032,["onClick"]),e(r,{onClick:E(L=>q(t),["prevent"]),type:"danger"},{default:l(()=>[p(" 删除 ")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),g("div",pe,[e(R,{onSizeChange:I,onCurrentChange:A,"current-page":w.value,"page-sizes":[10,20,50,100],"page-size":h.value,total:C.value,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])]),e(F,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=t=>b.value=t),title:"添加活动模板",width:"30%"},{footer:l(()=>[g("span",de,[e(r,{type:"primary",onClick:B},{default:l(()=>[p("确定")]),_:1}),e(r,{onClick:U},{default:l(()=>[p("重置")]),_:1})])]),default:l(()=>[e(x,{ref_key:"templateAddFormRef",ref:f,model:m.value,rules:T,"label-width":"80px"},{default:l(()=>[e(i,{label:"模板名",prop:"tem_name"},{default:l(()=>[e(u,{modelValue:m.value.tem_name,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value.tem_name=t),autocomplete:"off",placeholder:"请输入模板名"},null,8,["modelValue"])]),_:1}),e(i,{label:"名称",prop:"name"},{default:l(()=>[e(u,{modelValue:m.value.name,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value.name=t),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"简介",prop:"info"},{default:l(()=>[e(u,{modelValue:m.value.info,"onUpdate:modelValue":a[2]||(a[2]=t=>m.value.info=t),autocomplete:"off",placeholder:"请输入简介"},null,8,["modelValue"])]),_:1}),e(i,{label:"位置",prop:"location"},{default:l(()=>[e(u,{modelValue:m.value.location,"onUpdate:modelValue":a[3]||(a[3]=t=>m.value.location=t),autocomplete:"off",placeholder:"请输入位置"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(F,{modelValue:y.value,"onUpdate:modelValue":a[9]||(a[9]=t=>y.value=t),title:"修改活动模板",width:"30%"},{footer:l(()=>[g("span",ce,[e(r,{type:"primary",onClick:P},{default:l(()=>[p("确定")]),_:1}),e(r,{onClick:k},{default:l(()=>[p("重置")]),_:1})])]),default:l(()=>[e(x,{ref_key:"templateUpdateFormRef",ref:_,model:n.value,rules:T,"label-width":"80px"},{default:l(()=>[e(i,{label:"模板名",prop:"tem_name"},{default:l(()=>[e(u,{modelValue:n.value.tem_name,"onUpdate:modelValue":a[5]||(a[5]=t=>n.value.tem_name=t),autocomplete:"off",placeholder:"请输入模板名"},null,8,["modelValue"])]),_:1}),e(i,{label:"名称",prop:"name"},{default:l(()=>[e(u,{modelValue:n.value.name,"onUpdate:modelValue":a[6]||(a[6]=t=>n.value.name=t),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"简介",prop:"info"},{default:l(()=>[e(u,{modelValue:n.value.info,"onUpdate:modelValue":a[7]||(a[7]=t=>n.value.info=t),autocomplete:"off",placeholder:"请输入简介"},null,8,["modelValue"])]),_:1}),e(i,{label:"位置",prop:"location"},{default:l(()=>[e(u,{modelValue:n.value.location,"onUpdate:modelValue":a[8]||(a[8]=t=>n.value.location=t),autocomplete:"off",placeholder:"请输入位置"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ze=le(fe,[["__scopeId","data-v-845a618b"]]);export{ze as default};
